<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:h="http://java.sun.com/jsf/html" 
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets">
       
    <h:head>
    </h:head>
    
    <h:body> 
   	<ui:composition template="/template/layout.xhtml">
 		<ui:define name="content">

		<p:messages id="messages" autoUpdate="true" closable="true" />
			<table>
			
 			<tr>
 		
 			<td width="70%" >
			<h:form id="formRegistrar">
			<!-- agregar a style border-collapse:inherit y border-style:hidden a los columns de los msg para no mostrar las lineas-->
  			<p:panelGrid style="margin-top:20px;margin-left:40%">   <!-- centrado pero no dinamico -->
 				<f:facet name="header">
 					<p:row>  
            			<p:column colspan="2">Registrarse</p:column>  
       				</p:row>       				
 				</f:facet>
 				
 				<p:row>  
        			<p:column colspan="2" >	  
            			Registrate si no posees una cuenta.
        			</p:column>  
    			</p:row>
 				
 				
 				<!-- Datos de Personales -->
 				
 				<p:row>  
        			<p:column colspan="2" styleClass="ui-widget-header">	  
            			Datos Personales
        			</p:column>  
    			</p:row>  
 				
 				<p:row>
	 				<p:column>  
	 					Apellido *
	 				</p:column>
	 				<p:column> 
	 					<p:inputText id="Apellido" value="#{registrarseManaged.apellido}" required="true" maxlength="25" 
	 					validatorMessage="Ingrese solo caracteres [a-Z]" requiredMessage="Apellido es requerido">
	 					  <!-- <f:validateLength minimum="3" /> -->
	 					  <f:validateRegex pattern="[a-zA-Z ]*"/>
	 					  <p:ajax update="msgApellido" event="keyup" />
	 					</p:inputText>
	 				</p:column>
	 				<p:column>
	 				<p:message for="Apellido" id="msgApellido" display="icon"/>
	 				</p:column>
 				</p:row>
 			
 				<p:row>
	 				<p:column>  
	 					Nombre *
	 				</p:column>
	 				<p:column> 
	 					<p:inputText id="Nombre" value="#{registrarseManaged.nombre}" required="true" maxlength="25"
	 					validatorMessage="Ingrese solo caracteres [a-Z]" requiredMessage="Nombre es requerido">
	 					<!-- <f:validateLength minimum="3" /> -->
	 					<f:validateRegex pattern="[a-zA-Z ]*"/>
	 					<p:ajax update="msgNombre" event="keyup" />
	 					</p:inputText> 
	 				</p:column>
	 				<p:column>
	 				<p:message for="Nombre" id="msgNombre" display="icon"/>
	 				</p:column>
 				</p:row>								
				 				 				
				<p:row>
	 				<p:column>  
	 					Correo Electronico *
	 				</p:column>
	 				<p:column> 
	 					<p:inputText id="Email" value="#{registrarseManaged.email}" required="true" maxlength="35" requiredMessage="Email es requerido">
 							<f:validateLength minimum="5"/> 
 							<p:ajax update="msgEmail" event="keyup" />
 						</p:inputText>
	 				</p:column>
	 				<p:column>
	 				<p:message for="Email" id="msgEmail" display="icon"/>
	 				</p:column>
 				</p:row>		
 			
 				<p:row>
	 				<p:column>  
	 					Crea una Contraseña * (max. 5)
	 				</p:column>
	 				<p:column> 
	 					<p:password id="Password" value="#{registrarseManaged.loginPassword}" required="true" maxlength="5"
	 					 requiredMessage="Contraseña es requerida">
	 						 <f:validateLength minimum="3" maximum="5" />
	 						 <p:ajax update="msgPassword" event="keyup" />
	 					</p:password>
	 				</p:column>   
	 				<p:column>
	 				<p:message for="Password" id="msgPassword" display="icon"/>
	 				</p:column>
 				</p:row>		
 			
 				<p:row>
	 				<p:column>  
	 					Vuelve a Escribir la Contraseña *
	 				</p:column>
	 				<p:column> 
	 					<p:password id="Password2" value="#{registrarseManaged.loginPassword2}" required="true" maxlength="5"
	 					requiredMessage="Contraseña es requerida">
	 						<f:validateLength minimum="3" maximum="5" />
	 						<p:ajax update="msgPassword2" event="keyup" />
	 					</p:password>
	 				</p:column>   
	 				<p:column>
	 				<p:message for="Password2" id="msgPassword2" display="icon"/>
	 				</p:column>
 				</p:row>		
 			    	
 			    <p:row>
	 				<p:column>  
	 					Tipo de Documento de Identidad *
	 				</p:column>
	 				<p:column> 
	 					<p:selectOneMenu id="cboTipoDocumento" value="#{registrarseManaged.tipoDocSeleccionado}" >
                	<f:selectItems value="#{registrarseManaged.listaTipoDoc}" 
                				   var="tipoDoc"
                				   itemLabel="#{tipoDoc.descripcion}"                				   
                	/>  
                	<f:converter converterId="tipoDocumentoConverter" />
            	</p:selectOneMenu>
	 				</p:column>   
 				</p:row>		
 			    	
 			    <p:row>
	 				<p:column>  
	 					Número Documento de Identidad *
	 				</p:column>
	 				<p:column> 
	 					<p:inputText id="NumeroDocumentoIdentidad" value="#{registrarseManaged.numeroDocumentoIdentidad}" required="true"
	 					maxlength="8" validatorMessage="Ingrese solo digitos" requiredMessage="Numero de DNI es requerido">
	 						<f:validateLength maximum="8" />
	 						<f:validateRegex pattern="(^[1-9]{8}$)"/>
	 						<p:ajax update="msgNumeroDocumentoIdentidad" event="keyup" />
	 					</p:inputText>
	 				</p:column>   
	 				<p:column>
	 					<p:message for="NumeroDocumentoIdentidad" id="msgNumeroDocumentoIdentidad" display="icon"/>
	 				</p:column>
 				</p:row>	
 								
 				 <p:row>
	 				<p:column>  
	 					Celular *
	 				</p:column>
	 				<p:column> 
	 					<p:inputText id="TelefonoCelular" value="#{registrarseManaged.telefonoCelular}" required="true" maxlength="9"
	 					validatorMessage="Ingrese solo digitos" requiredMessage="Numero de celular es requerido">
	 						<f:validateLength maximum="9" />
	 						<f:validateRegex pattern="(^[1-9]{9}$)"/>
	 						<p:ajax update="msgTelefonoCelular" event="keyup" />
	 					</p:inputText>
	 				</p:column>  
	 				<p:column>
	 					<p:message for="TelefonoCelular" id="msgTelefonoCelular" display="icon"/>
	 				</p:column>
 				</p:row>	
 				
 				<p:row>
	 				<p:column>  
	 					Telefono *
	 				</p:column>
	 				<p:column> 
	 					<p:inputText id="TelefonoPrincipal" value="#{registrarseManaged.telefonoPrincipal}" required="true" 
	 					validatorMessage="Ingrese solo digitos" maxlength="7" requiredMessage="Numero de Telefono fijo es requerido">
	 					<f:validateRegex pattern="(^[1-9]{7}$)"/>
	 						<f:validateLength maximum="7" />
	 						<p:ajax update="msgTelefonoPrincipal" event="keyup" />
	 					</p:inputText>
	 				</p:column>   
	 				<p:column>
	 				<p:message for="TelefonoPrincipal" id="msgTelefonoPrincipal" display="icon"/>
	 				</p:column>
 				</p:row> 				
 				
 				<!-- Datos de la Empresa -->
 				<!-- Opcional ? -->
			 	<p:row>  
        			<p:column colspan="2" styleClass="ui-widget-header">	  
            			Datos de Empresa
        			</p:column>  
    			</p:row>  
 				
 				<p:row>
	 				<p:column>  
	 					RUC
	 				</p:column>
	 				<p:column> 
	 					<p:inputText id="Ruc" value="#{registrarseManaged.rucEmpresa}" maxlength="11">
	 					<f:validateRegex pattern="(^[1-9]{11}$)"/>
	 					</p:inputText>
	 				</p:column>   
 				</p:row> 	
 				
 				<p:row>
	 				<p:column>  
	 					Razón Social
	 				</p:column>
	 				<p:column> 
	 					<p:inputText id="RazonSocial" value="#{registrarseManaged.razonSocial}"/>
	 				</p:column>   
 				</p:row> 	
 				
 				<!-- Direccion Usual-->
 				
			 	<p:row>  
        			<p:column colspan="2" styleClass="ui-widget-header">	  
            			Dirección Frecuente
        			</p:column>  
    			</p:row>  
 				
 				<!-- Ubigeo -->		
    			<p:row>
					<p:column>
						Departamento *	  
					</p:column>  
        			<p:column>	  
            			<p:selectOneMenu id="cboUbiDepa" value="#{registrarseManaged.ubigeoManaged.ubiDepaSelect}" required="true"
            			requiredMessage="Elija un departamento">
            			<f:selectItem itemLabel="Seleccionar" itemValue="" />  
	                		<f:selectItems value="#{registrarseManaged.ubigeoManaged.listaUbiDepa}" 
	                				   var="ubiDepa"
	                				   itemLabel="#{ubiDepa.udNombre}"                				   
	                		/>  
	                		
	                		<p:ajax update="cboUbiProv"  
                        		listener="#{registrarseManaged.ubigeoManaged.handleDepaChange}" />  
	                		<f:converter converterId="ubigeoDepaConverter" />
            			</p:selectOneMenu>
        			</p:column>
    			</p:row>
    			
    			<p:row>
					<p:column>
						Provincia	  
					</p:column>  
        			<p:column>	  
            			<p:selectOneMenu id="cboUbiProv" value="#{registrarseManaged.ubigeoManaged.ubiProvSelect}" required="true"
            			requiredMessage="Elija una provincia">
            				<f:selectItem itemLabel="Seleccionar" itemValue="" />  
	                		<f:selectItems value="#{registrarseManaged.ubigeoManaged.listaUbiProv}" 
	                				   var="ubiProv"
	                				   itemLabel="#{ubiProv.upNombre}"                				   
	                		/>  
	                		<p:ajax update="cboUbiDist"  
                        		listener="#{registrarseManaged.ubigeoManaged.handleProvChange}" />  
	                		<f:converter converterId="ubigeoProvConverter" />
            			</p:selectOneMenu>
        			</p:column>
    			</p:row>
    			
    			<p:row>
					<p:column>
						Distrito	  
					</p:column>  
        			<p:column>	  
            			<p:selectOneMenu id="cboUbiDist" value="#{registrarseManaged.ubigeoManaged.ubiDistSelect}" required="true"
            			requiredMessage="Elija un distrito">
            				<f:selectItem itemLabel="Seleccionar" itemValue="" />  
	                		<f:selectItems value="#{registrarseManaged.ubigeoManaged.listaUbiDist}" 
	                				   var="ubiDist"
	                				   itemLabel="#{ubiDist.udiNombre}"                				   
	                		/>
	                		<p:ajax 	                			
                        		listener="#{registrarseManaged.ubigeoManaged.handleDistChange}" />  
	                		<f:converter converterId="ubigeoDistConverter" />
            			</p:selectOneMenu>
        			</p:column>
    			</p:row>
    			
    			<!-- Dirección -->
    			
    			<p:row>  
        			<p:column>	
        				Dirección Destino *		  
        			</p:column>
        			<p:column>	
        				  <p:inputText id="Direccion" value="#{registrarseManaged.direccion}" required="true" maxlength="35"
        				   requiredMessage="Direccion es requerido">
        				  	<f:validateLength minimum="7"/>
	 						<p:ajax update="msgDireccion" event="keyup" />
        				  </p:inputText>  
        			</p:column>
        			<p:column>
        				<p:message for="Direccion" id="msgDireccion" display="icon"/>
        			</p:column>
       			</p:row>	
       			
    			<p:row>
	 				<p:column colspan="2">  
	 					<p:commandButton id="btnTest" value="Registrar" 
 				 	    action="#{registrarseManaged.insertarUsuario}" />
	 				</p:column>

 				</p:row>			 	    
 			</p:panelGrid>
 			</h:form>
 		
 		
			</td>
			</tr>
			</table>
			

		</ui:define>
    	</ui:composition> 
    </h:body>
 
</html>
