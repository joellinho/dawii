<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:h="http://java.sun.com/jsf/html" 
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets">

    <h:body> 
    	<ui:composition template="/template/layout.xhtml">
 		<ui:define name="content">
 		<h:form id="frmPedido">
 		
			<p:panelGrid style="margin-top:20px">
				<!-- Titulo de la tabla -->   
				<f:facet name="header">
 					<p:row>  
            			<p:column colspan="2">Pedido</p:column>  
       				</p:row>       				
 				</f:facet>
 				
 				<!-- Separador Datos Generales--> 				
				<p:row>  
        			<p:column colspan="2" styleClass="ui-widget-header">	  
            			Datos Generales del Pedido
        			</p:column>
    			</p:row>
				
				<!-- Ubigeo -->
				<p:row>
					<p:column>
						Departamento	  
					</p:column>  
        			<p:column>	  
            			<p:selectOneMenu id="cboUbiDepa" value="#{pedidoManaged.ubiDepaSelect}">
            			<f:selectItem itemLabel="Seleccionar" itemValue="" />  
	                		<f:selectItems value="#{pedidoManaged.listaUbiDepa}" 
	                				   var="ubiDepa"
	                				   itemLabel="#{ubiDepa.udnombre}"                				   
	                		/>  
	                		
	                		<p:ajax update="cboUbiProv"  
                        		listener="#{pedidoManaged.handleDepaChange}" />  
	                		<f:converter converterId="ubigeoDepaConverter" />
            			</p:selectOneMenu>
        			</p:column>
    			</p:row>
    			
    			<p:row>
					<p:column>
						Provincia	  
					</p:column>  
        			<p:column>	  
            			<p:selectOneMenu id="cboUbiProv" value="#{pedidoManaged.ubiProvSelect}">
            				<f:selectItem itemLabel="Seleccionar" itemValue="" />  
	                		<f:selectItems value="#{pedidoManaged.listaUbiProv}" 
	                				   var="ubiProv"
	                				   itemLabel="#{ubiProv.upnombre}"                				   
	                		/>  
	                		<p:ajax update="cboUbiDist"  
                        		listener="#{pedidoManaged.handleProvChange}" />  
	                		<f:converter converterId="ubigeoProvConverter" />
            			</p:selectOneMenu>
        			</p:column>
    			</p:row>
    			
    			<p:row>
					<p:column>
						Distrito	  
					</p:column>  
        			<p:column>	  
            			<p:selectOneMenu id="cboUbiDist" value="#{pedidoManaged.ubiDistSelect}">
            				<f:selectItem itemLabel="Seleccionar" itemValue="" />  
	                		<f:selectItems value="#{pedidoManaged.listaUbiDist}" 
	                				   var="ubiDist"
	                				   itemLabel="#{ubiDist.udinombre}"                				   
	                		/>
	                		<p:ajax 
                        		listener="#{pedidoManaged.handleDistChange}" />  
	                		<f:converter converterId="ubigeoDistConverter" />
            			</p:selectOneMenu>
        			</p:column>
    			</p:row>
    			
    			<!-- Dirección -->
    			
    			<p:row>  
        			<p:column>	
        				Dirección Destino:		  
        			</p:column>
        			<p:column>	
        				  <p:inputText id="txtDireccion" value="#{pedidoManaged.direccionDestino}" />
        			</p:column>
       			</p:row>
       			
       			<p:row>  
        			<p:column>	
        				Referencia		  
        			</p:column>
        			<p:column>	
        				  <p:inputText id="txtReferencia" value="#{pedidoManaged.referenciaDirDestino}" />
        			</p:column>
       			</p:row>
    			
    			
				<p:row>  
        			<p:column>	
        				  <p:commandButton id="btnTest" value="test" 
 				 	    actionListener="#{pedidoManaged.test}" ajax="false" />
        			</p:column>
       			</p:row>
			
				<p:row>  
        			<p:column colspan="2" styleClass="ui-widget-header">	  
            			Detalle del Pedido
        			</p:column>
    			</p:row>
    			
    			<!-- Tabla Productos -->
    			<p:row>
    				<p:column>
    					<p:dataTable id="tblDetalle" var="detalle" value="#{pedidoManaged.listaDetallePedido}" 
    					 rowKey="#{detalle.id}" wigdetvar="tableDetalle" >  
		  	
		  				</p:dataTable>
		  				
		  				 <p:column headerText="Producto">  
		            		#{detalle.productoTienda.productoEmpresa.descripcion}  
		        		 </p:column>  
		  				
		  				 <p:column headerText="Producto">	  
		            		
		            		<p:spinner id="detCantidad"   
                    			value="#{detalle.cantidad}" min="0" max="100"/> 
		        		 </p:column>	
    				</p:column>
    				
    				<p:column style="width:4%">  
                		<p:commandButton  icon="ui-icon-search" >  
                			  
            			</p:commandButton>  
        			</p:column>
        			
        			<p:column style="width:4%">  
                		<p:commandButton id="deleteButton" update="tblDetalle" icon="i-icon-circle-close" title="Delete">  
                			  
            			</p:commandButton>  
        			</p:column>    
    				
 
    			</p:row>
			</p:panelGrid>
		</h:form>
		
		<!-- Form de busqueda de producto -->
		<h:form id="frmBuscarProducto">
			<p:dialog id="dlgBuscarProducto" header="Productos" wigdetVar="buscarProductos" resizable="true">
				<h:panelGrid columns="2" cellpadding="5">  
					
				</h:panelGrid>
			</p:dialog>
				
	
		</h:form>
		
		<!-- Form de eliminación de producto-->
		
		
 		</ui:define>
    	</ui:composition> 
    </h:body>
 
</html>

  
